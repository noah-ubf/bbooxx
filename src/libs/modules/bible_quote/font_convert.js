import * as _ from 'lodash';

const GREEK = {
  '!':'!',    '"':'᾿',    '#':'῎',    '$':'῎',    '%':'῞',    '&':'&',    '\'':'\'',  '(':'(',
  ')':')',    '*':'*',    '+':'΅',    ',':',',    '-':'-',    '.':'.',    '/':'´',    '0':'0',
  '1':'1',    '2':'2',    '3':'3',    '4':'4',    '5':'5',    '6':'6',    '7':'7',    '8':'8',
  '9':'9',    ':':':',    ';':';',    '<':'<',    '=':'=',    '>':'>',    '?':'?',    '@':'@',
  'A':'Α',    'B':'Β',    'C':'Χ',    'D':'Δ',    'E':'Ε',    'F':'Φ',    'G':'Γ',    'H':'Η',
  'I':'Ι',    'J':'῍',    'K':'Κ',    'L':'Λ',    'M':'Μ',    'N':'Ν',    'O':'Ο',    'P':'Π',
  'Q':'Ψ',    'R':'Ρ',    'S':'Σ',    'T':'Τ',    'U':'Υ',    'V':'•',    'W':'Ω',    'X':'Ξ',
  'Y':'Θ',    'Z':'Ζ',    '[':'[',    '\\':'`',   ']':']',    '^':'῞',    '_':'῀',    '`':'ι',
  'a':'α',    'b':'β',    'c':'χ',    'd':'δ',    'e':'ε',    'f':'φ',    'g':'γ',    'h':'η',
  'i':'ι',    'j':'῝',    'k':'κ',    'l':'λ',    'm':'μ',    'n':'ν',    'o':'ο',    'p':'π',
  'q':'ψ',    'r':'ρ',    's':'σ',    't':'τ',    'u':'υ',    'v':'ς',    'w':'ω',    'x':'ξ',
  'y':'θ',    'z':'ζ',    '{':'῟',    '|':'|',    '}':'῏',    '~':'~',
  /*
    '῾', '¨', 'ˉ', '˘', 'ʹ', '͵', 'ͺ', ';', '΄',
    Ά, Έ, Ή, Ί, Ό, Ύ, Ώ, ά, έ, ή, ό, ί, ύ, ώ, Ϊ, Ϋ, ϊ, ϋ, ΰ, ΐ,


  */
};

const HEBREW = {
  '!':'!',      '"':'\u05b2', '#':'-',       '$':'$',      '%':'\u05B1', '&':'&',     '\'':'\u05B7', '(':'(',
  ')':')',      '*':'*',      '+':'\u05BC',  ',':',',      '-':'-',      '.':'.',      '/':'\u05B8', '0':'0',
  '1':'1',      '2':'2',      '3':'3',       '4':'4',      '5':'5',      '6':'6',      '7':'7',      '8':'8',
  '9':'9',      ':':'\u05C3', ';':'\u05B0',  '<':'<',      '=':'\u05BC', '>':'>',      '?':'?',      '@':'@',
  'A':'-',      'B':'-',      'C':'-',       'D':'‬-',      'E':'-',      'F':'‬\u05BA', 'G':'-',      'H':'-',
  'I':'‬\u05B4', 'J':'-',      'K':'ך‬',       'L':'-',      'M':'ם‬',      'N':'ן',       'O':'-',      'P':'ף‬',
  'Q':'-',      'R':'-',      'S':'\u05C2',  'T':'‬ך',      'U':'‬ץ‬',      'V':'\u05C1',  'W':'-',      'X':'ה',
  'Y':'ץ',      'Z':'-',      '[':'\u05B5', '\\':'\u05B8', ']':'\u05B6', '^':'-',      '_':'\u05B0',  '`':'`',
  'a':'א',      'b':'ב',      'c':'\u05BB',  'd':'ד',      'e':'ע',      'f':'\u05C2', 'g':'ג',       'h':'ה‬',
  'i':'‬\u05B4', 'j':'ט',      'k':'כ',       'l':'ל',      'm':'מ',      'n':'נ',      'o':'ס',       'p':'פ‬',
  'q':'ק',      'r':'ר',      's':'ש',       't':'ת',      'u':'צ',      'v':'ש',      'w':'ו',       'x':'ח',
  'y':'י',       'z':'ז',      '{':'\u05B7', '|':'|',       '}':'\u05B6', '~':'~',
};

export function convertFontToUtf8(fontName, text) {
  if(!fontName) return text;
  let table = null;
  if (fontName.match(/^(grk|graeca)/i)) table = GREEK;
  if (fontName.match(/^heb/i)) table = HEBREW;
  if (!table) return text;
  let res = text.split('').map(c => (table[c] || c));
  if (table === HEBREW) res = _.reverse(res);
  return res.join('');
}

export function convertToUtf8(text, fontName) {
  return convertFontToUtf8(fontName, text);
}